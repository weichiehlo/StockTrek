let data = {
    "Meta Data": {
        "1. Information": "Intraday (5min) open, high, low, close prices and volume",
        "2. Symbol": "IBM",
        "3. Last Refreshed": "2020-04-29 16:00:00",
        "4. Interval": "5min",
        "5. Output Size": "Compact",
        "6. Time Zone": "US/Eastern"
    },
    "Time Series (5min)": {
        "2020-04-29 16:00:00": {
            "1. open": "128.6600",
            "2. high": "128.8900",
            "3. low": "128.5200",
            "4. close": "128.7200",
            "5. volume": "245072"
        },
        "2020-04-29 15:55:00": {
            "1. open": "129.2400",
            "2. high": "129.2500",
            "3. low": "128.6150",
            "4. close": "128.6500",
            "5. volume": "152434"
        },
        "2020-04-29 15:50:00": {
            "1. open": "129.2100",
            "2. high": "129.2600",
            "3. low": "129.1399",
            "4. close": "129.2150",
            "5. volume": "87917"
        },
        "2020-04-29 15:45:00": {
            "1. open": "129.1500",
            "2. high": "129.2700",
            "3. low": "129.1072",
            "4. close": "129.2150",
            "5. volume": "72274"
        },
        "2020-04-29 15:40:00": {
            "1. open": "129.1800",
            "2. high": "129.2510",
            "3. low": "129.0400",
            "4. close": "129.1500",
            "5. volume": "56184"
        },
        "2020-04-29 15:35:00": {
            "1. open": "129.1750",
            "2. high": "129.2050",
            "3. low": "128.9550",
            "4. close": "129.1850",
            "5. volume": "86606"
        },
        "2020-04-29 15:30:00": {
            "1. open": "129.1200",
            "2. high": "129.2079",
            "3. low": "129.0600",
            "4. close": "129.1500",
            "5. volume": "59687"
        },
        "2020-04-29 15:25:00": {
            "1. open": "128.7790",
            "2. high": "129.1500",
            "3. low": "128.7500",
            "4. close": "129.1200",
            "5. volume": "81622"
        },
        "2020-04-29 15:20:00": {
            "1. open": "128.9100",
            "2. high": "128.9400",
            "3. low": "128.6700",
            "4. close": "128.7700",
            "5. volume": "51745"
        },
        "2020-04-29 15:15:00": {
            "1. open": "128.8800",
            "2. high": "128.9300",
            "3. low": "128.8000",
            "4. close": "128.9000",
            "5. volume": "48065"
        },
        "2020-04-29 15:10:00": {
            "1. open": "128.8000",
            "2. high": "128.9100",
            "3. low": "128.6900",
            "4. close": "128.8700",
            "5. volume": "47164"
        },
        "2020-04-29 15:05:00": {
            "1. open": "128.5700",
            "2. high": "128.8300",
            "3. low": "128.5200",
            "4. close": "128.7700",
            "5. volume": "53939"
        },
        "2020-04-29 15:00:00": {
            "1. open": "128.1900",
            "2. high": "128.6181",
            "3. low": "128.1400",
            "4. close": "128.5700",
            "5. volume": "44861"
        },
        "2020-04-29 14:55:00": {
            "1. open": "128.6900",
            "2. high": "128.7200",
            "3. low": "128.1700",
            "4. close": "128.2200",
            "5. volume": "97913"
        },
        "2020-04-29 14:50:00": {
            "1. open": "129.1500",
            "2. high": "129.2000",
            "3. low": "128.6900",
            "4. close": "128.6900",
            "5. volume": "34549"
        },
        "2020-04-29 14:45:00": {
            "1. open": "129.1000",
            "2. high": "129.2700",
            "3. low": "129.0300",
            "4. close": "129.1400",
            "5. volume": "37181"
        },
        "2020-04-29 14:40:00": {
            "1. open": "128.8000",
            "2. high": "129.1000",
            "3. low": "128.6800",
            "4. close": "129.0850",
            "5. volume": "41123"
        },
        "2020-04-29 14:35:00": {
            "1. open": "128.8000",
            "2. high": "128.8500",
            "3. low": "128.5300",
            "4. close": "128.8200",
            "5. volume": "45266"
        },
        "2020-04-29 14:30:00": {
            "1. open": "128.9916",
            "2. high": "129.1384",
            "3. low": "128.7600",
            "4. close": "128.8000",
            "5. volume": "39794"
        },
        "2020-04-29 14:25:00": {
            "1. open": "128.7000",
            "2. high": "129.0000",
            "3. low": "128.7000",
            "4. close": "129.0000",
            "5. volume": "33033"
        },
        "2020-04-29 14:20:00": {
            "1. open": "128.6900",
            "2. high": "128.8400",
            "3. low": "128.6600",
            "4. close": "128.7000",
            "5. volume": "37739"
        },
        "2020-04-29 14:15:00": {
            "1. open": "128.4400",
            "2. high": "128.6400",
            "3. low": "128.3900",
            "4. close": "128.6400",
            "5. volume": "35032"
        },
        "2020-04-29 14:10:00": {
            "1. open": "128.4300",
            "2. high": "128.5400",
            "3. low": "128.2400",
            "4. close": "128.4400",
            "5. volume": "36669"
        },
        "2020-04-29 14:05:00": {
            "1. open": "128.6000",
            "2. high": "128.7600",
            "3. low": "128.1900",
            "4. close": "128.4500",
            "5. volume": "50592"
        },
        "2020-04-29 14:00:00": {
            "1. open": "128.6700",
            "2. high": "128.7600",
            "3. low": "128.5300",
            "4. close": "128.6400",
            "5. volume": "37672"
        },
        "2020-04-29 13:55:00": {
            "1. open": "128.6200",
            "2. high": "128.7500",
            "3. low": "128.6100",
            "4. close": "128.6767",
            "5. volume": "40091"
        },
        "2020-04-29 13:50:00": {
            "1. open": "128.3900",
            "2. high": "128.6200",
            "3. low": "128.3900",
            "4. close": "128.6200",
            "5. volume": "32402"
        },
        "2020-04-29 13:45:00": {
            "1. open": "128.5500",
            "2. high": "128.6400",
            "3. low": "128.3800",
            "4. close": "128.3800",
            "5. volume": "32663"
        },
        "2020-04-29 13:40:00": {
            "1. open": "128.4000",
            "2. high": "128.5700",
            "3. low": "128.3400",
            "4. close": "128.5650",
            "5. volume": "22190"
        },
        "2020-04-29 13:35:00": {
            "1. open": "128.6500",
            "2. high": "128.7000",
            "3. low": "128.4000",
            "4. close": "128.4000",
            "5. volume": "52354"
        },
        "2020-04-29 13:30:00": {
            "1. open": "128.4900",
            "2. high": "128.6601",
            "3. low": "128.4600",
            "4. close": "128.6287",
            "5. volume": "25840"
        },
        "2020-04-29 13:25:00": {
            "1. open": "128.6600",
            "2. high": "128.6600",
            "3. low": "128.4500",
            "4. close": "128.4850",
            "5. volume": "19299"
        },
        "2020-04-29 13:20:00": {
            "1. open": "128.7300",
            "2. high": "128.7500",
            "3. low": "128.6400",
            "4. close": "128.6700",
            "5. volume": "21309"
        },
        "2020-04-29 13:15:00": {
            "1. open": "128.9529",
            "2. high": "128.9600",
            "3. low": "128.7200",
            "4. close": "128.7200",
            "5. volume": "19927"
        },
        "2020-04-29 13:10:00": {
            "1. open": "128.9500",
            "2. high": "129.0100",
            "3. low": "128.8800",
            "4. close": "128.9800",
            "5. volume": "43528"
        },
        "2020-04-29 13:05:00": {
            "1. open": "128.8800",
            "2. high": "128.9900",
            "3. low": "128.8500",
            "4. close": "128.9450",
            "5. volume": "23978"
        },
        "2020-04-29 13:00:00": {
            "1. open": "128.9866",
            "2. high": "129.0000",
            "3. low": "128.8300",
            "4. close": "128.8800",
            "5. volume": "21858"
        },
        "2020-04-29 12:55:00": {
            "1. open": "128.9243",
            "2. high": "128.9900",
            "3. low": "128.9000",
            "4. close": "128.9775",
            "5. volume": "19391"
        },
        "2020-04-29 12:50:00": {
            "1. open": "128.8600",
            "2. high": "128.9500",
            "3. low": "128.8300",
            "4. close": "128.9056",
            "5. volume": "21589"
        },
        "2020-04-29 12:45:00": {
            "1. open": "128.8300",
            "2. high": "128.9500",
            "3. low": "128.7950",
            "4. close": "128.8500",
            "5. volume": "54348"
        },
        "2020-04-29 12:40:00": {
            "1. open": "128.4100",
            "2. high": "128.8200",
            "3. low": "128.3992",
            "4. close": "128.8200",
            "5. volume": "32294"
        },
        "2020-04-29 12:35:00": {
            "1. open": "128.3400",
            "2. high": "128.4700",
            "3. low": "128.3000",
            "4. close": "128.4100",
            "5. volume": "28005"
        },
        "2020-04-29 12:30:00": {
            "1. open": "128.0900",
            "2. high": "128.3800",
            "3. low": "128.0500",
            "4. close": "128.3200",
            "5. volume": "25946"
        },
        "2020-04-29 12:25:00": {
            "1. open": "128.2600",
            "2. high": "128.3100",
            "3. low": "128.0300",
            "4. close": "128.0700",
            "5. volume": "28907"
        },
        "2020-04-29 12:20:00": {
            "1. open": "128.5400",
            "2. high": "128.5500",
            "3. low": "128.2300",
            "4. close": "128.2600",
            "5. volume": "62657"
        },
        "2020-04-29 12:15:00": {
            "1. open": "128.7300",
            "2. high": "128.7400",
            "3. low": "128.5300",
            "4. close": "128.5300",
            "5. volume": "26231"
        },
        "2020-04-29 12:10:00": {
            "1. open": "128.7300",
            "2. high": "128.8200",
            "3. low": "128.6700",
            "4. close": "128.7300",
            "5. volume": "23545"
        },
        "2020-04-29 12:05:00": {
            "1. open": "128.7700",
            "2. high": "128.7700",
            "3. low": "128.6300",
            "4. close": "128.7500",
            "5. volume": "82761"
        },
        "2020-04-29 12:00:00": {
            "1. open": "128.7900",
            "2. high": "128.8400",
            "3. low": "128.7308",
            "4. close": "128.7600",
            "5. volume": "28925"
        },
        "2020-04-29 11:55:00": {
            "1. open": "128.6200",
            "2. high": "128.8300",
            "3. low": "128.5576",
            "4. close": "128.8100",
            "5. volume": "43316"
        },
        "2020-04-29 11:50:00": {
            "1. open": "128.4800",
            "2. high": "128.6000",
            "3. low": "128.3901",
            "4. close": "128.5973",
            "5. volume": "22049"
        },
        "2020-04-29 11:45:00": {
            "1. open": "128.5900",
            "2. high": "128.6100",
            "3. low": "128.4600",
            "4. close": "128.4600",
            "5. volume": "29429"
        },
        "2020-04-29 11:40:00": {
            "1. open": "128.5550",
            "2. high": "128.5900",
            "3. low": "128.4100",
            "4. close": "128.5700",
            "5. volume": "22317"
        },
        "2020-04-29 11:35:00": {
            "1. open": "128.6400",
            "2. high": "128.7200",
            "3. low": "128.4700",
            "4. close": "128.5486",
            "5. volume": "76550"
        },
        "2020-04-29 11:30:00": {
            "1. open": "128.4400",
            "2. high": "128.7300",
            "3. low": "128.4000",
            "4. close": "128.6600",
            "5. volume": "47769"
        },
        "2020-04-29 11:25:00": {
            "1. open": "128.1700",
            "2. high": "128.4870",
            "3. low": "128.1400",
            "4. close": "128.3800",
            "5. volume": "32381"
        },
        "2020-04-29 11:20:00": {
            "1. open": "128.3300",
            "2. high": "128.4600",
            "3. low": "128.1600",
            "4. close": "128.2000",
            "5. volume": "31320"
        },
        "2020-04-29 11:15:00": {
            "1. open": "128.2900",
            "2. high": "128.5150",
            "3. low": "128.2400",
            "4. close": "128.3100",
            "5. volume": "38306"
        },
        "2020-04-29 11:10:00": {
            "1. open": "128.2300",
            "2. high": "128.3600",
            "3. low": "128.1700",
            "4. close": "128.3100",
            "5. volume": "34116"
        },
        "2020-04-29 11:05:00": {
            "1. open": "128.3300",
            "2. high": "128.4700",
            "3. low": "128.0670",
            "4. close": "128.2100",
            "5. volume": "35773"
        },
        "2020-04-29 11:00:00": {
            "1. open": "128.6200",
            "2. high": "128.6600",
            "3. low": "128.2900",
            "4. close": "128.3313",
            "5. volume": "27897"
        },
        "2020-04-29 10:55:00": {
            "1. open": "128.4100",
            "2. high": "128.6900",
            "3. low": "128.3541",
            "4. close": "128.6200",
            "5. volume": "29710"
        },
        "2020-04-29 10:50:00": {
            "1. open": "128.4900",
            "2. high": "128.5550",
            "3. low": "128.3012",
            "4. close": "128.4000",
            "5. volume": "34045"
        },
        "2020-04-29 10:45:00": {
            "1. open": "128.3600",
            "2. high": "128.5800",
            "3. low": "128.3050",
            "4. close": "128.4800",
            "5. volume": "39121"
        },
        "2020-04-29 10:40:00": {
            "1. open": "128.4300",
            "2. high": "128.5900",
            "3. low": "128.1900",
            "4. close": "128.3800",
            "5. volume": "47595"
        },
        "2020-04-29 10:35:00": {
            "1. open": "128.4700",
            "2. high": "128.6900",
            "3. low": "128.4100",
            "4. close": "128.4550",
            "5. volume": "34342"
        },
        "2020-04-29 10:30:00": {
            "1. open": "128.4500",
            "2. high": "128.5700",
            "3. low": "128.3801",
            "4. close": "128.4600",
            "5. volume": "38862"
        },
        "2020-04-29 10:25:00": {
            "1. open": "128.0300",
            "2. high": "128.4700",
            "3. low": "128.0100",
            "4. close": "128.4500",
            "5. volume": "41039"
        },
        "2020-04-29 10:20:00": {
            "1. open": "127.7687",
            "2. high": "128.0370",
            "3. low": "127.7687",
            "4. close": "128.0000",
            "5. volume": "33976"
        },
        "2020-04-29 10:15:00": {
            "1. open": "127.6228",
            "2. high": "127.9000",
            "3. low": "127.5300",
            "4. close": "127.7644",
            "5. volume": "40606"
        },
        "2020-04-29 10:10:00": {
            "1. open": "128.0100",
            "2. high": "128.0300",
            "3. low": "127.6300",
            "4. close": "127.6300",
            "5. volume": "37495"
        },
        "2020-04-29 10:05:00": {
            "1. open": "128.3900",
            "2. high": "128.4100",
            "3. low": "127.9700",
            "4. close": "128.0000",
            "5. volume": "50069"
        },
        "2020-04-29 10:00:00": {
            "1. open": "128.5000",
            "2. high": "128.7000",
            "3. low": "128.3900",
            "4. close": "128.3900",
            "5. volume": "42304"
        },
        "2020-04-29 09:55:00": {
            "1. open": "128.4500",
            "2. high": "128.5100",
            "3. low": "128.3400",
            "4. close": "128.4909",
            "5. volume": "38077"
        },
        "2020-04-29 09:50:00": {
            "1. open": "128.5400",
            "2. high": "128.6450",
            "3. low": "128.2371",
            "4. close": "128.4200",
            "5. volume": "224361"
        },
        "2020-04-29 09:45:00": {
            "1. open": "128.6500",
            "2. high": "128.7900",
            "3. low": "128.4600",
            "4. close": "128.5194",
            "5. volume": "42581"
        },
        "2020-04-29 09:40:00": {
            "1. open": "129.0800",
            "2. high": "129.2300",
            "3. low": "128.4100",
            "4. close": "128.6300",
            "5. volume": "82737"
        },
        "2020-04-29 09:35:00": {
            "1. open": "128.8800",
            "2. high": "129.3100",
            "3. low": "128.4700",
            "4. close": "129.0300",
            "5. volume": "219026"
        },
        "2020-04-28 16:00:00": {
            "1. open": "125.9200",
            "2. high": "126.6000",
            "3. low": "125.9100",
            "4. close": "126.2500",
            "5. volume": "340495"
        },
        "2020-04-28 15:55:00": {
            "1. open": "126.1300",
            "2. high": "126.2700",
            "3. low": "125.7900",
            "4. close": "125.9200",
            "5. volume": "121342"
        },
        "2020-04-28 15:50:00": {
            "1. open": "126.6516",
            "2. high": "126.6600",
            "3. low": "126.1000",
            "4. close": "126.1200",
            "5. volume": "67486"
        },
        "2020-04-28 15:45:00": {
            "1. open": "126.8700",
            "2. high": "126.9100",
            "3. low": "126.6450",
            "4. close": "126.6500",
            "5. volume": "39856"
        },
        "2020-04-28 15:40:00": {
            "1. open": "126.7300",
            "2. high": "126.9100",
            "3. low": "126.5800",
            "4. close": "126.8600",
            "5. volume": "40110"
        },
        "2020-04-28 15:35:00": {
            "1. open": "126.8500",
            "2. high": "126.9600",
            "3. low": "126.7100",
            "4. close": "126.7200",
            "5. volume": "30370"
        },
        "2020-04-28 15:30:00": {
            "1. open": "126.8300",
            "2. high": "126.9300",
            "3. low": "126.8000",
            "4. close": "126.8900",
            "5. volume": "29561"
        },
        "2020-04-28 15:25:00": {
            "1. open": "126.9100",
            "2. high": "127.1900",
            "3. low": "126.5300",
            "4. close": "126.7901",
            "5. volume": "45005"
        },
        "2020-04-28 15:20:00": {
            "1. open": "126.8300",
            "2. high": "126.9800",
            "3. low": "126.7501",
            "4. close": "126.9100",
            "5. volume": "22018"
        },
        "2020-04-28 15:15:00": {
            "1. open": "126.9400",
            "2. high": "126.9600",
            "3. low": "126.8213",
            "4. close": "126.8735",
            "5. volume": "23960"
        },
        "2020-04-28 15:10:00": {
            "1. open": "127.1300",
            "2. high": "127.1700",
            "3. low": "126.9044",
            "4. close": "126.9600",
            "5. volume": "22049"
        },
        "2020-04-28 15:05:00": {
            "1. open": "126.8000",
            "2. high": "127.1200",
            "3. low": "126.7200",
            "4. close": "127.1200",
            "5. volume": "30151"
        },
        "2020-04-28 15:00:00": {
            "1. open": "126.7400",
            "2. high": "126.8200",
            "3. low": "126.6100",
            "4. close": "126.7900",
            "5. volume": "21733"
        },
        "2020-04-28 14:55:00": {
            "1. open": "126.9400",
            "2. high": "127.0700",
            "3. low": "126.7120",
            "4. close": "126.7120",
            "5. volume": "24785"
        },
        "2020-04-28 14:50:00": {
            "1. open": "126.8700",
            "2. high": "126.9900",
            "3. low": "126.8110",
            "4. close": "126.9550",
            "5. volume": "17751"
        },
        "2020-04-28 14:45:00": {
            "1. open": "126.9000",
            "2. high": "127.0200",
            "3. low": "126.8450",
            "4. close": "126.8700",
            "5. volume": "18348"
        },
        "2020-04-28 14:40:00": {
            "1. open": "127.2700",
            "2. high": "127.2900",
            "3. low": "126.8900",
            "4. close": "126.9000",
            "5. volume": "34688"
        },
        "2020-04-28 14:35:00": {
            "1. open": "127.3100",
            "2. high": "127.3991",
            "3. low": "127.2240",
            "4. close": "127.2700",
            "5. volume": "17708"
        },
        "2020-04-28 14:30:00": {
            "1. open": "127.4000",
            "2. high": "127.4300",
            "3. low": "127.2400",
            "4. close": "127.3050",
            "5. volume": "20972"
        },
        "2020-04-28 14:25:00": {
            "1. open": "127.3885",
            "2. high": "127.4200",
            "3. low": "127.3121",
            "4. close": "127.4100",
            "5. volume": "18463"
        },
        "2020-04-28 14:20:00": {
            "1. open": "127.4600",
            "2. high": "127.5309",
            "3. low": "127.3600",
            "4. close": "127.3700",
            "5. volume": "27799"
        },
        "2020-04-28 14:15:00": {
            "1. open": "127.1533",
            "2. high": "127.4700",
            "3. low": "127.1533",
            "4. close": "127.4500",
            "5. volume": "20194"
        }
    }
}

let d = new Date();
let marketInactive = false;
let time


// If the market is closed
if(d.getHours()>15){
    marketInactive = true;
}



//add zero padding
let month  = (d.getMonth()+1).toString();
if(month.length === 1){
    month = "0" + month
} 

let minutes  = (Math.floor(d.getMinutes()/5)*5).toString();
if(minutes.length === 1){
    minutes = "0" + minutes
} 



//If the market is closed then set the time to 4PM else set the closest time, in a 5 minutes interval
if(marketInactive){
    time = d.getFullYear()+"-"+month+"-"+d.getDate()+" "+"16:00:00"
}else{
    time = d.getFullYear()+"-"+month+"-"+d.getDate()+" "+d.getHours()+":"+minutes+":00"
}


let getlatestAvg = ()=>{
    let high = data["Time Series (5min)"][time]['2. high']
    let low = data["Time Series (5min)"][time]['3. low']
    return (parseFloat(high)+parseFloat(low))/2
}

let getAllAvg = ()=>{

    let intervals = Object.keys(data["Time Series (5min)"]);
    let total = intervals.reduce((a, interval)=>{
        let high = data["Time Series (5min)"][interval]['2. high']
        let low = data["Time Series (5min)"][interval]['3. low']
        return a + (parseFloat(high)+parseFloat(low))/2
    }
    ,0)
    return total/intervals.length
}
console.log(data["Meta Data"]["2. Symbol"])
console.log(getlatestAvg())
console.log(getAllAvg())




