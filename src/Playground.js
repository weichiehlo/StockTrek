let data = {
    "Meta Data": {
        "1. Information": "Intraday (5min) open, high, low, close prices and volume",
        "2. Symbol": "IBM",
        "3. Last Refreshed": "2020-05-08 16:00:00",
        "4. Interval": "5min",
        "5. Output Size": "Compact",
        "6. Time Zone": "US/Eastern"
    },
    "Time Series (5min)": {
        "2020-05-08 16:00:00": {
            "1. open": "123.0100",
            "2. high": "123.1500",
            "3. low": "122.9400",
            "4. close": "122.9500",
            "5. volume": "202607"
        },
        "2020-05-08 15:55:00": {
            "1. open": "123.0300",
            "2. high": "123.2300",
            "3. low": "122.7800",
            "4. close": "123.0000",
            "5. volume": "135402"
        },
        "2020-05-08 15:50:00": {
            "1. open": "122.9500",
            "2. high": "123.1200",
            "3. low": "122.8600",
            "4. close": "123.0700",
            "5. volume": "72259"
        },
        "2020-05-08 15:45:00": {
            "1. open": "122.7700",
            "2. high": "122.9900",
            "3. low": "122.7700",
            "4. close": "122.9600",
            "5. volume": "58469"
        },
        "2020-05-08 15:40:00": {
            "1. open": "122.8250",
            "2. high": "122.8350",
            "3. low": "122.7350",
            "4. close": "122.7700",
            "5. volume": "42256"
        },
        "2020-05-08 15:35:00": {
            "1. open": "122.7700",
            "2. high": "122.8900",
            "3. low": "122.6650",
            "4. close": "122.8200",
            "5. volume": "46046"
        },
        "2020-05-08 15:30:00": {
            "1. open": "122.7700",
            "2. high": "122.8500",
            "3. low": "122.7300",
            "4. close": "122.7600",
            "5. volume": "37934"
        },
        "2020-05-08 15:25:00": {
            "1. open": "122.5600",
            "2. high": "122.7699",
            "3. low": "122.5200",
            "4. close": "122.7500",
            "5. volume": "35782"
        },
        "2020-05-08 15:20:00": {
            "1. open": "122.3700",
            "2. high": "122.6400",
            "3. low": "122.3700",
            "4. close": "122.5500",
            "5. volume": "47323"
        },
        "2020-05-08 15:15:00": {
            "1. open": "122.2950",
            "2. high": "122.3990",
            "3. low": "122.2147",
            "4. close": "122.3750",
            "5. volume": "28019"
        },
        "2020-05-08 15:10:00": {
            "1. open": "122.2350",
            "2. high": "122.3726",
            "3. low": "122.0300",
            "4. close": "122.3000",
            "5. volume": "115170"
        },
        "2020-05-08 15:05:00": {
            "1. open": "122.2300",
            "2. high": "122.3400",
            "3. low": "122.1700",
            "4. close": "122.2394",
            "5. volume": "96713"
        },
        "2020-05-08 15:00:00": {
            "1. open": "122.4600",
            "2. high": "122.4800",
            "3. low": "122.1700",
            "4. close": "122.2100",
            "5. volume": "62143"
        },
        "2020-05-08 14:55:00": {
            "1. open": "122.4800",
            "2. high": "122.5400",
            "3. low": "122.3900",
            "4. close": "122.4500",
            "5. volume": "41251"
        },
        "2020-05-08 14:50:00": {
            "1. open": "122.5647",
            "2. high": "122.5700",
            "3. low": "122.4000",
            "4. close": "122.4600",
            "5. volume": "39392"
        },
        "2020-05-08 14:45:00": {
            "1. open": "122.2940",
            "2. high": "122.5700",
            "3. low": "122.2940",
            "4. close": "122.5600",
            "5. volume": "21004"
        },
        "2020-05-08 14:40:00": {
            "1. open": "122.4600",
            "2. high": "122.4900",
            "3. low": "122.2900",
            "4. close": "122.3000",
            "5. volume": "22005"
        },
        "2020-05-08 14:35:00": {
            "1. open": "122.4700",
            "2. high": "122.5400",
            "3. low": "122.4300",
            "4. close": "122.4550",
            "5. volume": "27591"
        },
        "2020-05-08 14:30:00": {
            "1. open": "122.4100",
            "2. high": "122.5300",
            "3. low": "122.3900",
            "4. close": "122.4500",
            "5. volume": "24774"
        },
        "2020-05-08 14:25:00": {
            "1. open": "122.3100",
            "2. high": "122.4250",
            "3. low": "122.2100",
            "4. close": "122.4250",
            "5. volume": "55227"
        },
        "2020-05-08 14:20:00": {
            "1. open": "122.0900",
            "2. high": "122.3228",
            "3. low": "122.0700",
            "4. close": "122.3228",
            "5. volume": "30370"
        },
        "2020-05-08 14:15:00": {
            "1. open": "121.8198",
            "2. high": "122.1100",
            "3. low": "121.8198",
            "4. close": "122.0900",
            "5. volume": "54913"
        },
        "2020-05-08 14:10:00": {
            "1. open": "121.7500",
            "2. high": "121.8550",
            "3. low": "121.7100",
            "4. close": "121.8300",
            "5. volume": "43632"
        },
        "2020-05-08 14:05:00": {
            "1. open": "121.7800",
            "2. high": "121.8600",
            "3. low": "121.7225",
            "4. close": "121.7400",
            "5. volume": "31540"
        },
        "2020-05-08 14:00:00": {
            "1. open": "121.6850",
            "2. high": "121.8000",
            "3. low": "121.6817",
            "4. close": "121.7800",
            "5. volume": "29191"
        },
        "2020-05-08 13:55:00": {
            "1. open": "121.6200",
            "2. high": "121.7500",
            "3. low": "121.6200",
            "4. close": "121.6700",
            "5. volume": "21132"
        },
        "2020-05-08 13:50:00": {
            "1. open": "121.7300",
            "2. high": "121.7400",
            "3. low": "121.4900",
            "4. close": "121.6100",
            "5. volume": "37014"
        },
        "2020-05-08 13:45:00": {
            "1. open": "121.7900",
            "2. high": "121.8400",
            "3. low": "121.6700",
            "4. close": "121.7300",
            "5. volume": "24219"
        },
        "2020-05-08 13:40:00": {
            "1. open": "121.9600",
            "2. high": "121.9600",
            "3. low": "121.7900",
            "4. close": "121.8200",
            "5. volume": "14963"
        },
        "2020-05-08 13:35:00": {
            "1. open": "121.9000",
            "2. high": "121.9700",
            "3. low": "121.8600",
            "4. close": "121.9700",
            "5. volume": "28792"
        },
        "2020-05-08 13:30:00": {
            "1. open": "121.7800",
            "2. high": "121.8800",
            "3. low": "121.7200",
            "4. close": "121.8800",
            "5. volume": "16994"
        },
        "2020-05-08 13:25:00": {
            "1. open": "121.7300",
            "2. high": "121.7800",
            "3. low": "121.6900",
            "4. close": "121.7600",
            "5. volume": "19816"
        },
        "2020-05-08 13:20:00": {
            "1. open": "121.7250",
            "2. high": "121.7700",
            "3. low": "121.6700",
            "4. close": "121.7100",
            "5. volume": "22317"
        },
        "2020-05-08 13:15:00": {
            "1. open": "121.7700",
            "2. high": "121.8300",
            "3. low": "121.7368",
            "4. close": "121.7400",
            "5. volume": "12325"
        },
        "2020-05-08 13:10:00": {
            "1. open": "121.9600",
            "2. high": "121.9700",
            "3. low": "121.6853",
            "4. close": "121.7600",
            "5. volume": "49213"
        },
        "2020-05-08 13:05:00": {
            "1. open": "121.9700",
            "2. high": "122.0100",
            "3. low": "121.9100",
            "4. close": "121.9616",
            "5. volume": "67930"
        },
        "2020-05-08 13:00:00": {
            "1. open": "122.0100",
            "2. high": "122.0300",
            "3. low": "121.8900",
            "4. close": "121.9700",
            "5. volume": "43212"
        },
        "2020-05-08 12:55:00": {
            "1. open": "121.9200",
            "2. high": "122.1700",
            "3. low": "121.9200",
            "4. close": "121.9850",
            "5. volume": "31251"
        },
        "2020-05-08 12:50:00": {
            "1. open": "121.8800",
            "2. high": "121.9600",
            "3. low": "121.8200",
            "4. close": "121.9000",
            "5. volume": "16541"
        },
        "2020-05-08 12:45:00": {
            "1. open": "121.8100",
            "2. high": "121.9000",
            "3. low": "121.7725",
            "4. close": "121.8840",
            "5. volume": "28082"
        },
        "2020-05-08 12:40:00": {
            "1. open": "121.7900",
            "2. high": "121.9900",
            "3. low": "121.6900",
            "4. close": "121.8000",
            "5. volume": "71425"
        },
        "2020-05-08 12:35:00": {
            "1. open": "121.7000",
            "2. high": "121.8800",
            "3. low": "121.6706",
            "4. close": "121.7900",
            "5. volume": "65279"
        },
        "2020-05-08 12:30:00": {
            "1. open": "121.7400",
            "2. high": "121.8200",
            "3. low": "121.6230",
            "4. close": "121.7000",
            "5. volume": "31239"
        },
        "2020-05-08 12:25:00": {
            "1. open": "121.7950",
            "2. high": "121.8100",
            "3. low": "121.6600",
            "4. close": "121.7400",
            "5. volume": "36844"
        },
        "2020-05-08 12:20:00": {
            "1. open": "122.0000",
            "2. high": "122.0000",
            "3. low": "121.7800",
            "4. close": "121.8000",
            "5. volume": "31252"
        },
        "2020-05-08 12:15:00": {
            "1. open": "122.1100",
            "2. high": "122.1200",
            "3. low": "122.0000",
            "4. close": "122.0100",
            "5. volume": "48729"
        },
        "2020-05-08 12:10:00": {
            "1. open": "122.1610",
            "2. high": "122.2800",
            "3. low": "122.0900",
            "4. close": "122.1200",
            "5. volume": "46223"
        },
        "2020-05-08 12:05:00": {
            "1. open": "122.2600",
            "2. high": "122.2700",
            "3. low": "122.1400",
            "4. close": "122.1750",
            "5. volume": "28595"
        },
        "2020-05-08 12:00:00": {
            "1. open": "122.1900",
            "2. high": "122.2900",
            "3. low": "122.1599",
            "4. close": "122.2500",
            "5. volume": "18953"
        },
        "2020-05-08 11:55:00": {
            "1. open": "122.1900",
            "2. high": "122.2400",
            "3. low": "122.1600",
            "4. close": "122.1900",
            "5. volume": "23902"
        },
        "2020-05-08 11:50:00": {
            "1. open": "122.0600",
            "2. high": "122.2900",
            "3. low": "122.0550",
            "4. close": "122.1900",
            "5. volume": "32056"
        },
        "2020-05-08 11:45:00": {
            "1. open": "122.1228",
            "2. high": "122.1300",
            "3. low": "122.0100",
            "4. close": "122.0500",
            "5. volume": "27400"
        },
        "2020-05-08 11:40:00": {
            "1. open": "122.0000",
            "2. high": "122.1200",
            "3. low": "121.8400",
            "4. close": "122.1050",
            "5. volume": "35052"
        },
        "2020-05-08 11:35:00": {
            "1. open": "122.0350",
            "2. high": "122.1400",
            "3. low": "121.9400",
            "4. close": "121.9800",
            "5. volume": "32339"
        },
        "2020-05-08 11:30:00": {
            "1. open": "121.9550",
            "2. high": "122.0950",
            "3. low": "121.9550",
            "4. close": "122.0300",
            "5. volume": "31982"
        },
        "2020-05-08 11:25:00": {
            "1. open": "122.0500",
            "2. high": "122.1039",
            "3. low": "121.8500",
            "4. close": "121.9900",
            "5. volume": "64915"
        },
        "2020-05-08 11:20:00": {
            "1. open": "122.0350",
            "2. high": "122.1500",
            "3. low": "122.0300",
            "4. close": "122.0700",
            "5. volume": "23280"
        },
        "2020-05-08 11:15:00": {
            "1. open": "122.0550",
            "2. high": "122.2000",
            "3. low": "121.9600",
            "4. close": "122.0200",
            "5. volume": "27773"
        },
        "2020-05-08 11:10:00": {
            "1. open": "121.8600",
            "2. high": "122.2000",
            "3. low": "121.8600",
            "4. close": "122.0500",
            "5. volume": "37605"
        },
        "2020-05-08 11:05:00": {
            "1. open": "121.8350",
            "2. high": "121.9300",
            "3. low": "121.5100",
            "4. close": "121.8400",
            "5. volume": "42341"
        },
        "2020-05-08 11:00:00": {
            "1. open": "121.9300",
            "2. high": "122.0300",
            "3. low": "121.7950",
            "4. close": "121.8400",
            "5. volume": "30481"
        },
        "2020-05-08 10:55:00": {
            "1. open": "121.8850",
            "2. high": "122.0600",
            "3. low": "121.7900",
            "4. close": "121.9400",
            "5. volume": "32966"
        },
        "2020-05-08 10:50:00": {
            "1. open": "121.7300",
            "2. high": "121.9300",
            "3. low": "121.6300",
            "4. close": "121.8650",
            "5. volume": "27211"
        },
        "2020-05-08 10:45:00": {
            "1. open": "121.9500",
            "2. high": "122.0150",
            "3. low": "121.6900",
            "4. close": "121.7300",
            "5. volume": "39144"
        },
        "2020-05-08 10:40:00": {
            "1. open": "121.9700",
            "2. high": "122.0700",
            "3. low": "121.9000",
            "4. close": "121.9400",
            "5. volume": "24301"
        },
        "2020-05-08 10:35:00": {
            "1. open": "121.8700",
            "2. high": "122.1100",
            "3. low": "121.8000",
            "4. close": "121.9650",
            "5. volume": "29282"
        },
        "2020-05-08 10:30:00": {
            "1. open": "122.1550",
            "2. high": "122.1720",
            "3. low": "121.8600",
            "4. close": "121.8650",
            "5. volume": "53281"
        },
        "2020-05-08 10:25:00": {
            "1. open": "122.2900",
            "2. high": "122.3247",
            "3. low": "122.0600",
            "4. close": "122.1550",
            "5. volume": "49599"
        },
        "2020-05-08 10:20:00": {
            "1. open": "122.1900",
            "2. high": "122.4300",
            "3. low": "122.0500",
            "4. close": "122.2700",
            "5. volume": "30230"
        },
        "2020-05-08 10:15:00": {
            "1. open": "121.9200",
            "2. high": "122.2399",
            "3. low": "121.9200",
            "4. close": "122.2239",
            "5. volume": "40357"
        },
        "2020-05-08 10:10:00": {
            "1. open": "122.1300",
            "2. high": "122.1725",
            "3. low": "121.8300",
            "4. close": "121.9150",
            "5. volume": "55642"
        },
        "2020-05-08 10:05:00": {
            "1. open": "121.6600",
            "2. high": "122.2000",
            "3. low": "121.4900",
            "4. close": "122.1503",
            "5. volume": "83944"
        },
        "2020-05-08 10:00:00": {
            "1. open": "121.4100",
            "2. high": "121.9000",
            "3. low": "121.3800",
            "4. close": "121.6400",
            "5. volume": "46614"
        },
        "2020-05-08 09:55:00": {
            "1. open": "121.4500",
            "2. high": "121.7300",
            "3. low": "121.1350",
            "4. close": "121.3700",
            "5. volume": "53387"
        },
        "2020-05-08 09:50:00": {
            "1. open": "121.0952",
            "2. high": "121.5500",
            "3. low": "121.0750",
            "4. close": "121.4800",
            "5. volume": "65903"
        },
        "2020-05-08 09:45:00": {
            "1. open": "121.1300",
            "2. high": "121.4300",
            "3. low": "121.0700",
            "4. close": "121.0700",
            "5. volume": "97154"
        },
        "2020-05-08 09:40:00": {
            "1. open": "121.9000",
            "2. high": "121.9500",
            "3. low": "121.0600",
            "4. close": "121.1495",
            "5. volume": "96088"
        },
        "2020-05-08 09:35:00": {
            "1. open": "122.6700",
            "2. high": "122.8000",
            "3. low": "121.6500",
            "4. close": "121.9200",
            "5. volume": "124058"
        },
        "2020-05-07 16:00:00": {
            "1. open": "121.1400",
            "2. high": "121.2400",
            "3. low": "120.9900",
            "4. close": "121.2100",
            "5. volume": "160328"
        },
        "2020-05-07 15:55:00": {
            "1. open": "121.0400",
            "2. high": "121.2500",
            "3. low": "120.9800",
            "4. close": "121.1500",
            "5. volume": "96280"
        },
        "2020-05-07 15:50:00": {
            "1. open": "121.0800",
            "2. high": "121.2450",
            "3. low": "120.9600",
            "4. close": "121.0300",
            "5. volume": "73610"
        },
        "2020-05-07 15:45:00": {
            "1. open": "121.0300",
            "2. high": "121.1200",
            "3. low": "120.9200",
            "4. close": "121.0500",
            "5. volume": "60590"
        },
        "2020-05-07 15:40:00": {
            "1. open": "121.2600",
            "2. high": "121.3150",
            "3. low": "121.0100",
            "4. close": "121.0700",
            "5. volume": "54975"
        },
        "2020-05-07 15:35:00": {
            "1. open": "121.4200",
            "2. high": "121.5000",
            "3. low": "121.0400",
            "4. close": "121.2700",
            "5. volume": "48226"
        },
        "2020-05-07 15:30:00": {
            "1. open": "121.2800",
            "2. high": "121.4250",
            "3. low": "121.2700",
            "4. close": "121.4250",
            "5. volume": "31506"
        },
        "2020-05-07 15:25:00": {
            "1. open": "121.0500",
            "2. high": "121.2750",
            "3. low": "121.0200",
            "4. close": "121.2700",
            "5. volume": "46434"
        },
        "2020-05-07 15:20:00": {
            "1. open": "121.1850",
            "2. high": "121.2000",
            "3. low": "120.8500",
            "4. close": "121.0550",
            "5. volume": "70651"
        },
        "2020-05-07 15:15:00": {
            "1. open": "121.2200",
            "2. high": "121.3352",
            "3. low": "121.1400",
            "4. close": "121.1800",
            "5. volume": "33456"
        },
        "2020-05-07 15:10:00": {
            "1. open": "121.1300",
            "2. high": "121.3300",
            "3. low": "121.1300",
            "4. close": "121.2300",
            "5. volume": "31398"
        },
        "2020-05-07 15:05:00": {
            "1. open": "121.2500",
            "2. high": "121.2700",
            "3. low": "121.0100",
            "4. close": "121.1450",
            "5. volume": "54412"
        },
        "2020-05-07 15:00:00": {
            "1. open": "121.3400",
            "2. high": "121.4000",
            "3. low": "121.2000",
            "4. close": "121.2600",
            "5. volume": "28628"
        },
        "2020-05-07 14:55:00": {
            "1. open": "121.2100",
            "2. high": "121.3750",
            "3. low": "121.1100",
            "4. close": "121.3500",
            "5. volume": "43737"
        },
        "2020-05-07 14:50:00": {
            "1. open": "121.2100",
            "2. high": "121.2200",
            "3. low": "121.1000",
            "4. close": "121.2150",
            "5. volume": "38596"
        },
        "2020-05-07 14:45:00": {
            "1. open": "121.4250",
            "2. high": "121.4250",
            "3. low": "121.1678",
            "4. close": "121.2150",
            "5. volume": "37484"
        },
        "2020-05-07 14:40:00": {
            "1. open": "121.2600",
            "2. high": "121.4400",
            "3. low": "121.2600",
            "4. close": "121.4300",
            "5. volume": "37624"
        },
        "2020-05-07 14:35:00": {
            "1. open": "121.4700",
            "2. high": "121.5500",
            "3. low": "121.2000",
            "4. close": "121.2500",
            "5. volume": "59916"
        },
        "2020-05-07 14:30:00": {
            "1. open": "121.5500",
            "2. high": "121.6500",
            "3. low": "121.4500",
            "4. close": "121.4700",
            "5. volume": "36085"
        },
        "2020-05-07 14:25:00": {
            "1. open": "121.7650",
            "2. high": "121.7700",
            "3. low": "121.5200",
            "4. close": "121.5500",
            "5. volume": "40132"
        },
        "2020-05-07 14:20:00": {
            "1. open": "121.8250",
            "2. high": "121.8500",
            "3. low": "121.7100",
            "4. close": "121.7741",
            "5. volume": "22791"
        },
        "2020-05-07 14:15:00": {
            "1. open": "121.6700",
            "2. high": "121.8800",
            "3. low": "121.6700",
            "4. close": "121.8400",
            "5. volume": "27050"
        }
    }
}

let d = new Date();
    let marketInactive = false;
    let time

    // If the market is closed
    if(d.getHours()>15){
        marketInactive = true;
    }

    //add zero padding
    let month  = (d.getMonth()+1).toString();
    if(month.length === 1){
        month = "0" + month
    } 

    let minutes  = (Math.floor(d.getMinutes()/5)*5).toString();
    if(minutes.length === 1){
        minutes = "0" + minutes
    } 

    let date = d.getDate().toString();;
    if(date.length === 1){
        date = "0"+date
    }

    //If the market is closed then set the time to 4PM else set the closest time, in a 5 minutes interval
    if(marketInactive){
        time = d.getFullYear()+"-"+month+"-"+date+" 16:00:00"
    }else{
        time = d.getFullYear()+"-"+month+"-"+date+" "+d.getHours()+":"+minutes+":00"
    }

    let getlatestAvg = ()=>{
        let high = data["Time Series (5min)"][time]['2. high']
        let low = data["Time Series (5min)"][time]['3. low']
        return ((parseFloat(high)+parseFloat(low))/2).toFixed(2)
    }
    
    let getAllAvg = ()=>{
    
        let intervals = Object.keys(data["Time Series (5min)"]);
        let total = intervals.reduce((a, interval)=>{
            let high = data["Time Series (5min)"][interval]['2. high']
            let low = data["Time Series (5min)"][interval]['3. low']
            return a + (parseFloat(high)+parseFloat(low))/2
        }
        ,0)
        return (total/intervals.length).toFixed(2)
    }

    let getMin = ()=>{
        let intervals = Object.keys(data["Time Series (5min)"]);
        let min;
        for(let interval of intervals){
            if(min === undefined){
                min = data["Time Series (5min)"][interval]['3. low']
            }else if(data["Time Series (5min)"][interval]['3. low']<min){
                min = data["Time Series (5min)"][interval]['3. low']
            }
            
        }
        return parseFloat(min).toFixed(2)
       
    }

    let getMax = ()=>{
        let intervals = Object.keys(data["Time Series (5min)"]);
        let max;
        for(let interval of intervals){
            if(max === undefined){
                max = data["Time Series (5min)"][interval]['2. high']
            }else if(data["Time Series (5min)"][interval]['2. high']>max){
                max = data["Time Series (5min)"][interval]['2. high']
            }
        }
        return parseFloat(max).toFixed(2)
       
    }

console.log(data["Meta Data"]["2. Symbol"])
console.log(getlatestAvg())
console.log(getAllAvg())

console.log(getMin())




